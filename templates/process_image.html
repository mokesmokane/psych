{% extends "base.html" %}

{% block content %}
<h2>Process New Image</h2>
<form id="process-form" method="POST" enctype="multipart/form-data">
    <div class="mb-3">
        <label for="image-upload" class="form-label">Choose an image to process</label>
        <input type="file" class="form-control" id="image-upload" name="photo" accept="image/*" required>
    </div>
    <div class="mb-3">
        <img id="image-preview" class="img-fluid" style="display:none;" alt="Image Preview">
    </div>
    <div class="mb-3">
        <label for="iterations" class="form-label">Number of psychedelic iterations (1-9)</label>
        <input type="number" class="form-control" id="iterations" name="iterations" min="1" max="9" value="9" required>
    </div>
    <button type="submit" class="btn btn-primary mt-3">Process Image</button>
</form>

<div id="processing-status" class="alert alert-info mt-3" style="display:none;">Processing...</div>

<div id="processed-images-container" class="image-grid mt-4"></div>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.socket.io/4.4.1/socket.io.min.js"></script>
{% endblock %}
